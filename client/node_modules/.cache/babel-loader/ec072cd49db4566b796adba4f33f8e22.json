{"ast":null,"code":"import _classCallCheck from \"/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/src/App.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport './Login.css';\nimport { withRouter } from 'react-router-dom';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this);\n\n    _this.change = function (e) {\n      _this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    _this.onSubmit = function (e) {\n      _this.fetchData();\n\n      e.preventDefault(); //console.log(this.state);\n\n      _this.setState({\n        username: \"\",\n        password: \"\"\n      });\n\n      _this.props.history.push('/landing');\n    };\n\n    _this.state = {\n      data: [],\n      username: \"\",\n      password: \"\",\n      token: \"\"\n    };\n    return _this;\n  } //end constructor\n\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      fetch('http://theapi/api/auth', {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: 'myUserName',\n          password: 'myPassword',\n          Authorization: 'TheReturnedToken'\n        })\n      })\n      /*end fetch */\n      .then(function (results) {\n        return results.json();\n      }).then(function (data) {\n        return _this2.setState({\n          data: data\n        });\n      });\n    } //request the token\n\n  }, {\n    key: \"requestAccessToken\",\n    value: function requestAccessToken(data) {\n      var loginInfo = '${data}&grant_type=password';\n      return fetch('${API_URL}Token', {\n        method: 'POST',\n        headers: new Headers({\n          'Content-Type': 'application/json'\n        }),\n        body: loginInfo\n      }).then(function (response) {\n        return response.json();\n      });\n    } //authenticate request\n\n  }, {\n    key: \"requestUserInfo\",\n    value: function requestUserInfo(token) {\n      return fetch('${API_URL}api/participant/userinfo', {\n        method: 'GET',\n        headers: new Headers({\n          Authorization: 'Bearer ${token}'\n        })\n      }).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state.data);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }, \"Member Login\"), /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        id: \"username\",\n        name: \"username\",\n        placeholder: \"User Name\",\n        value: this.state.username,\n        onChange: function onChange(e) {\n          return _this3.change(e);\n        },\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 29\n        }\n      }), \"  \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"password\",\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: function onChange(e) {\n          return _this3.change(e);\n        },\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }), \"  \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick(e) {\n          return _this3.onSubmit(e);\n        },\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/src/App.js"],"names":["React","Component","ReactDOM","withRouter","App","change","e","setState","target","name","value","onSubmit","fetchData","preventDefault","username","password","props","history","push","state","data","token","fetch","method","headers","body","JSON","stringify","Authorization","then","results","json","loginInfo","Headers","response","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport './Login.css';\nimport { withRouter } from 'react-router-dom';\n\nclass App extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            data: [],\n            username: \"\",\n            password: \"\",\n            token: \"\",\n        };\n    } //end constructor\n\n    componentWillMount() {\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    fetchData() {\n        fetch('http://theapi/api/auth', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n            },\n             body: JSON.stringify({\n                username: 'myUserName',\n                password: 'myPassword',\n                Authorization: 'TheReturnedToken',\n            })\n        }) /*end fetch */\n        .then(results => results.json())\n        .then(data => this.setState({ data: data })\n\n        )\n    }\n\n    //request the token\n      requestAccessToken(data) {\n        const loginInfo = '${data}&grant_type=password';\n        return fetch('${API_URL}Token', {\n          method: 'POST',\n          headers: new Headers({\n            'Content-Type': 'application/json',\n          }),\n          body: loginInfo,\n        })\n          .then((response) => response.json());\n      }\n\n      //authenticate request\n      requestUserInfo(token) {\n        return fetch('${API_URL}api/participant/userinfo', {\n          method: 'GET',\n          headers: new Headers({\n            Authorization: 'Bearer ${token}',\n          }),\n        })\n          .then((response) => response.json());\n      }\n\n    change = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }; //end change\n\n    onSubmit = (e) =>{\n        this.fetchData();\n        e.preventDefault();\n        //console.log(this.state);\n        this.setState({\n             username: \"\",\n             password: \"\",\n            });\n\n        this.props.history.push('/landing');\n        };\n\n    render() {\n    console.log(this.state.data);\n        return (\n           <div>\n                <div className=\"loginContainer\">\n                <h2>Member Login</h2>\n                    <form>\n                            <input\n                            id=\"username\"\n                            name=\"username\"\n                            placeholder=\"User Name\"\n                            value={this.state.username}\n                            onChange={e => this.change(e) }\n                            className=\"form-control\"\n                            />  <br />\n\n                            <input\n                            id=\"password\"\n                            name=\"password\"\n                            type=\"password\"\n                            placeholder=\"Password\"\n                            value={this.state.password}\n                            onChange={e => this.change(e) }\n                            className=\"form-control\"\n                            />  <br />\n\n                        <button onClick={e => this.onSubmit(e)} className=\"btn btn-primary\">Submit</button>\n                        </form>\n                    </div>\n            </div>\n        );\n      }\n}\n\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}