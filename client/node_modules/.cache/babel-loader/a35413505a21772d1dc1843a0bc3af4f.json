{"ast":null,"code":"import { SET_CURRENT_USER } from \"./types\"; // Register User\n\nexport var loginUser = function loginUser(userData, history) {\n  return function (dispatch) {\n    fetch('https://api.app.lettria.com/auth/login', {\n      method: 'POST',\n      credentials: \"same-origin\",\n      body: JSON.stringify({\n        email: userData.email,\n        password: userData.password\n      })\n    }).then(function (results) {\n      return results.json();\n    }).then(function (res) {\n      console.log(res.user);\n\n      if (res.user) {\n        dispatch(setCurrentUser(res));\n        history.push({\n          pathname: \"/user/profil\"\n        });\n      }\n    });\n  };\n};\nexport var updateInfoProfil = function updateInfoProfil(userData) {\n  return function (dispatch) {\n    fetch('https://api.app.lettria.com/auth/modifyUser', {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbmFseXRpY0lkIjoiNWY2ZGYyMDY4MzU1M2ExNjI5NzBkMWU0IiwicHJvamVjdElkIjoiNWY2ZGYyMDY4MzU1M2ExNjI5NzBkMWU1Iiwic3Vic2NyaXB0aW9uSWQiOiI1ZjZkZjFkYmY5YWVjMjE2MjM3N2RjNGUiLCJpYXQiOjE2MDE0MDAwMjgsImV4cCI6MTY0OTc4NDAyOH0.rUV5ChRNY3iKviougXmCLuvrbexYwy1fXxy4O-Bm7_Y'\n      },\n      body: JSON.stringify({\n        firstName: userData.firstName,\n        lastName: userData.lastName,\n        email: \"chacha.bouricheau@yop.com\",\n        userName: \"chachou24\"\n      })\n    }).then(function (results) {\n      return results.json();\n    }).then(function (res) {\n      dispatch(setCurrentUser(res));\n    });\n  };\n};\nexport var setCurrentUser = function setCurrentUser(res) {\n  return {\n    type: SET_CURRENT_USER,\n    user: res.user,\n    isAuthenticated: true\n  };\n}; // User loading","map":{"version":3,"sources":["/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/src/actions/authActions.js"],"names":["SET_CURRENT_USER","loginUser","userData","history","dispatch","fetch","method","credentials","body","JSON","stringify","email","password","then","results","json","res","console","log","user","setCurrentUser","push","pathname","updateInfoProfil","headers","firstName","lastName","userName","type","isAuthenticated"],"mappings":"AAAA,SACEA,gBADF,QAEO,SAFP,C,CAEiB;;AAGjB,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,OAAX;AAAA,SAAuB,UAAAC,QAAQ,EAAI;AAC1DC,IAAAA,KAAK,CAAC,wCAAD,EAA2C;AACtCC,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,WAAW,EAAE,aAFyB;AAGrCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAClBC,QAAAA,KAAK,EAAET,QAAQ,CAACS,KADE;AAElBC,QAAAA,QAAQ,EAAEV,QAAQ,CAACU;AAFD,OAAf;AAH+B,KAA3C,CAAL,CAQOC,IARP,CAQY,UAAAC,OAAO;AAAA,aAAIA,OAAO,CAACC,IAAR,EAAJ;AAAA,KARnB,EASGF,IATH,CASQ,UAAAG,GAAG,EAAI;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;;AACA,UAAGH,GAAG,CAACG,IAAP,EAAY;AACVf,QAAAA,QAAQ,CAACgB,cAAc,CAACJ,GAAD,CAAf,CAAR;AACEb,QAAAA,OAAO,CAACkB,IAAR,CAAa;AAACC,UAAAA,QAAQ,EAAC;AAAV,SAAb;AACD;AACJ,KAfP;AAgBD,GAjBwB;AAAA,CAAlB;AAmBP,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACrB,QAAD;AAAA,SAAc,UAAAE,QAAQ,EAAI;AACxDC,IAAAA,KAAK,CAAC,6CAAD,EAAgD;AAC3CC,MAAAA,MAAM,EAAE,MADmC;AAE3CkB,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAiB;AAFZ,OAFkC;AAM1ChB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAClBe,QAAAA,SAAS,EAAEvB,QAAQ,CAACuB,SADF;AAElBC,QAAAA,QAAQ,EAAExB,QAAQ,CAACwB,QAFD;AAGlBf,QAAAA,KAAK,EAAE,2BAHW;AAIlBgB,QAAAA,QAAQ,EAAE;AAJQ,OAAf;AANoC,KAAhD,CAAL,CAaOd,IAbP,CAaY,UAAAC,OAAO;AAAA,aAAIA,OAAO,CAACC,IAAR,EAAJ;AAAA,KAbnB,EAcGF,IAdH,CAcQ,UAAAG,GAAG,EAAI;AACPZ,MAAAA,QAAQ,CAACgB,cAAc,CAACJ,GAAD,CAAf,CAAR;AACD,KAhBP;AAiBD,GAlB+B;AAAA,CAAzB;AAqBP,OAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAAAJ,GAAG,EAAI;AACnC,SAAO;AACLY,IAAAA,IAAI,EAAE5B,gBADD;AAELmB,IAAAA,IAAI,EAAEH,GAAG,CAACG,IAFL;AAGLU,IAAAA,eAAe,EAAE;AAHZ,GAAP;AAKD,CANM,C,CAML","sourcesContent":["import {\n  SET_CURRENT_USER,\n} from \"./types\";// Register User\n\n\nexport const loginUser = (userData, history) => dispatch => {\n  fetch('https://api.app.lettria.com/auth/login', {\n            method: 'POST',\n            credentials: \"same-origin\" ,\n             body: JSON.stringify({\n                email: userData.email,\n                password: userData.password,\n\t\t\t\t\t\t})\n        })\n        .then(results => results.json())\n\t\t\t\t.then(res => {\n          console.log(res.user)\n          if(res.user){\n            dispatch(setCurrentUser(res));\n              history.push({pathname:\"/user/profil\"})\n            }\n        })\n};\n\nexport const updateInfoProfil = (userData) => dispatch => {\n  fetch('https://api.app.lettria.com/auth/modifyUser', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbmFseXRpY0lkIjoiNWY2ZGYyMDY4MzU1M2ExNjI5NzBkMWU0IiwicHJvamVjdElkIjoiNWY2ZGYyMDY4MzU1M2ExNjI5NzBkMWU1Iiwic3Vic2NyaXB0aW9uSWQiOiI1ZjZkZjFkYmY5YWVjMjE2MjM3N2RjNGUiLCJpYXQiOjE2MDE0MDAwMjgsImV4cCI6MTY0OTc4NDAyOH0.rUV5ChRNY3iKviougXmCLuvrbexYwy1fXxy4O-Bm7_Y',\n              },\n             body: JSON.stringify({\n                firstName: userData.firstName,\n                lastName: userData.lastName,\n                email: \"chacha.bouricheau@yop.com\",\n                userName: \"chachou24\"\n\t\t\t\t\t\t})\n        })\n        .then(results => results.json())\n\t\t\t\t.then(res => {\n          dispatch(setCurrentUser(res));\n        })\n};\n\n\nexport const setCurrentUser = res => {\n  return {\n    type: SET_CURRENT_USER,\n    user: res.user,\n    isAuthenticated: true\n  };\n};// User loading"]},"metadata":{},"sourceType":"module"}