{"ast":null,"code":"import { SET_CURRENT_USER } from \"./types\"; // Register User\n\nexport var loginUser = function loginUser(userData, history) {\n  return function (dispatch) {\n    fetch('https://api.app.lettria.com/auth/modifyUser', {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': 'LettriaSessionKey eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjZkZjFkYmY5YWVjMjE2MjM3N2RjNGQiLCJlbWFpbCI6InRoaWJhdWx0LmNvbGxhcmRAZ21haWwuY29tIiwicm9sZSI6IkJldGFVc2VyIiwiaWF0IjoxNjAxNDcxNTMxLCJleHAiOjE2MDE1NTc5MzF9.xdk2fi5zp3j_kXx5AmJ6v-SxZNleDbQ2kt62vuZNC7E'\n      },\n      body: JSON.stringify({\n        firstName: userData.firstName,\n        lastName: userData.lastName\n      })\n    }).then(function (results) {\n      return results.json();\n    }).then(function (res) {\n      dispatch(setCurrentUser(res));\n    });\n    fetch('https://api.app.lettria.com/auth/login', {\n      method: 'POST',\n      withCredentials: true,\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbmFseXRpY0lkIjoiNWY3NDk3M2RmOWFlYzIxNjIzNzdkYzU1IiwicHJvamVjdElkIjoiNWY3NDk3M2RmOWFlYzIxNjIzNzdkYzU2Iiwic3Vic2NyaXB0aW9uSWQiOiI1Zjc0OTcyMzE5ZGY3ZDE2MjhlZDg0OWYiLCJpYXQiOjE2MDE0NzY0MTksImV4cCI6MTY0OTg2MDQxOX0.KzDysz3FGf-davL52Wrdqf_eI-zTv0oJDTPUttJX2jU'\n      },\n      body: JSON.stringify({\n        email: userData.email,\n        password: userData.password\n      })\n    }).then(function (results) {\n      return results.json();\n    }).then(function (res) {\n      if (res.user) {\n        dispatch(setCurrentUser(res));\n        history.push({\n          pathname: \"/user/profil\"\n        });\n      }\n    });\n  };\n};\nexport var updateInfoProfil = function updateInfoProfil(userData) {\n  return function (dispatch) {\n    axios.post(\"/user/account\", userData).then(function (res) {\n      history.push({\n        pathname: \"/user/profil\",\n        message: res.data.message,\n        status: res.data.status\n      });\n    }) // re-direct to login on successful register\n    .catch(function (err) {\n      return dispatch({\n        type: GET_ERRORS,\n        payload: err.response.data\n      });\n    });\n  };\n};\nexport var setCurrentUser = function setCurrentUser(res) {\n  return {\n    type: SET_CURRENT_USER,\n    user: res.user,\n    isAuthenticated: true\n  };\n}; // User loading","map":{"version":3,"sources":["/home/ubuntu/Bureau/test-lettria/example-create-react-app-express/client/src/actions/authActions.js"],"names":["SET_CURRENT_USER","loginUser","userData","history","dispatch","fetch","method","headers","body","JSON","stringify","firstName","lastName","then","results","json","res","setCurrentUser","withCredentials","email","password","user","push","pathname","updateInfoProfil","axios","post","message","data","status","catch","err","type","GET_ERRORS","payload","response","isAuthenticated"],"mappings":"AAAA,SACEA,gBADF,QAEO,SAFP,C,CAEiB;;AAGjB,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,OAAX;AAAA,SAAuB,UAAAC,QAAQ,EAAI;AAC1DC,IAAAA,KAAK,CAAC,6CAAD,EAAgD;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAE3CC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAiB;AAFZ,OAFkC;AAM1CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAClBC,QAAAA,SAAS,EAAET,QAAQ,CAACS,SADF;AAE1BC,QAAAA,QAAQ,EAAEV,QAAQ,CAACU;AAFO,OAAf;AANoC,KAAhD,CAAL,CAWGC,IAXH,CAWQ,UAAAC,OAAO;AAAA,aAAIA,OAAO,CAACC,IAAR,EAAJ;AAAA,KAXf,EAYGF,IAZH,CAYQ,UAAAG,GAAG,EAAI;AACZZ,MAAAA,QAAQ,CAACa,cAAc,CAACD,GAAD,CAAf,CAAR;AACA,KAdH;AAgBAX,IAAAA,KAAK,CAAC,wCAAD,EAA2C;AACtCC,MAAAA,MAAM,EAAE,MAD8B;AAEtCY,MAAAA,eAAe,EAAE,IAFqB;AAGtCX,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAiB;AAFZ,OAH6B;AAOrCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAClBS,QAAAA,KAAK,EAAEjB,QAAQ,CAACiB,KADE;AAElBC,QAAAA,QAAQ,EAAElB,QAAQ,CAACkB;AAFD,OAAf;AAP+B,KAA3C,CAAL,CAYOP,IAZP,CAYY,UAAAC,OAAO;AAAA,aAAIA,OAAO,CAACC,IAAR,EAAJ;AAAA,KAZnB,EAaGF,IAbH,CAaQ,UAAAG,GAAG,EAAI;AACP,UAAGA,GAAG,CAACK,IAAP,EAAY;AACVjB,QAAAA,QAAQ,CAACa,cAAc,CAACD,GAAD,CAAf,CAAR;AACEb,QAAAA,OAAO,CAACmB,IAAR,CAAa;AAACC,UAAAA,QAAQ,EAAC;AAAV,SAAb;AACD;AACJ,KAlBP;AAmBD,GApCwB;AAAA,CAAlB;AAsCP,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACtB,QAAD;AAAA,SAAc,UAAAE,QAAQ,EAAI;AACxDqB,IAAAA,KAAK,CACFC,IADH,CACQ,eADR,EACyBxB,QADzB,EAEGW,IAFH,CAEQ,UAASG,GAAT,EAAa;AAACb,MAAAA,OAAO,CAACmB,IAAR,CAAa;AAACC,QAAAA,QAAQ,EAAC,cAAV;AAAyBI,QAAAA,OAAO,EAACX,GAAG,CAACY,IAAJ,CAASD,OAA1C;AAAkDE,QAAAA,MAAM,EAACb,GAAG,CAACY,IAAJ,CAASC;AAAlE,OAAb;AAAwF,KAF9G,EAEgH;AAFhH,KAGGC,KAHH,CAGS,UAAAC,GAAG;AAAA,aACR3B,QAAQ,CAAC;AACP4B,QAAAA,IAAI,EAAEC,UADC;AAEPC,QAAAA,OAAO,EAAEH,GAAG,CAACI,QAAJ,CAAaP;AAFf,OAAD,CADA;AAAA,KAHZ;AASD,GAV+B;AAAA,CAAzB;AAaP,OAAO,IAAMX,cAAc,GAAG,SAAjBA,cAAiB,CAAAD,GAAG,EAAI;AACnC,SAAO;AACLgB,IAAAA,IAAI,EAAEhC,gBADD;AAELqB,IAAAA,IAAI,EAAEL,GAAG,CAACK,IAFL;AAGLe,IAAAA,eAAe,EAAE;AAHZ,GAAP;AAKD,CANM,C,CAML","sourcesContent":["import {\n  SET_CURRENT_USER,\n} from \"./types\";// Register User\n\n\nexport const loginUser = (userData, history) => dispatch => {\n  fetch('https://api.app.lettria.com/auth/modifyUser', {\n\t\t\t\t\t\tmethod: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n                'Authorization': 'LettriaSessionKey eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjZkZjFkYmY5YWVjMjE2MjM3N2RjNGQiLCJlbWFpbCI6InRoaWJhdWx0LmNvbGxhcmRAZ21haWwuY29tIiwicm9sZSI6IkJldGFVc2VyIiwiaWF0IjoxNjAxNDcxNTMxLCJleHAiOjE2MDE1NTc5MzF9.xdk2fi5zp3j_kXx5AmJ6v-SxZNleDbQ2kt62vuZNC7E',\n              },\n             body: JSON.stringify({\n                firstName: userData.firstName,\n\t\t\t\t\t\t\t\tlastName: userData.lastName,\n\t\t\t\t\t\t})\n        })\n\t\t\t\t.then(results => results.json())\n\t\t\t\t.then(res => {\n\t\t\t\t\tdispatch(setCurrentUser(res))\n\t\t\t\t})\n\n  fetch('https://api.app.lettria.com/auth/login', {\n            method: 'POST',\n            withCredentials: true,\n            headers: {\n                'Content-type': 'application/json',\n                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbmFseXRpY0lkIjoiNWY3NDk3M2RmOWFlYzIxNjIzNzdkYzU1IiwicHJvamVjdElkIjoiNWY3NDk3M2RmOWFlYzIxNjIzNzdkYzU2Iiwic3Vic2NyaXB0aW9uSWQiOiI1Zjc0OTcyMzE5ZGY3ZDE2MjhlZDg0OWYiLCJpYXQiOjE2MDE0NzY0MTksImV4cCI6MTY0OTg2MDQxOX0.KzDysz3FGf-davL52Wrdqf_eI-zTv0oJDTPUttJX2jU',\n              },\n             body: JSON.stringify({\n                email: userData.email,\n                password: userData.password,\n\t\t\t\t\t\t})\n        })\n        .then(results => results.json())\n\t\t\t\t.then(res => {\n          if(res.user){\n            dispatch(setCurrentUser(res));\n              history.push({pathname:\"/user/profil\"})\n            }\n        })\n};\n\nexport const updateInfoProfil = (userData) => dispatch => {\n  axios\n    .post(\"/user/account\", userData)\n    .then(function(res){history.push({pathname:\"/user/profil\",message:res.data.message,status:res.data.status})}) // re-direct to login on successful register\n    .catch(err =>\n      dispatch({\n        type: GET_ERRORS,\n        payload: err.response.data\n      })\n    );\n}\n\n\nexport const setCurrentUser = res => {\n  return {\n    type: SET_CURRENT_USER,\n    user: res.user,\n    isAuthenticated: true\n  };\n};// User loading"]},"metadata":{},"sourceType":"module"}